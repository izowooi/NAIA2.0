# NAIA 2.0 UI 스케일링 가이드

## 개요

NAIA 2.0에 UI 스케일링 시스템이 추가되어 다양한 해상도와 DPI 환경에서 적절한 크기로 UI를 표시할 수 있습니다.

## 주요 기능

### 1. 자동 DPI 스케일링
- 시스템의 DPI 설정을 자동으로 감지하여 UI 크기를 조정합니다
- FHD(1920x1080): 약 80% 스케일 적용
- QHD(2560x1440): 100% 기준 스케일
- 4K UHD(3840x2160): 약 150% 스케일 적용

### 2. 수동 스케일링 조정
- 0.5배(50%) ~ 2.0배(200%)까지 자유롭게 조정 가능
- 실시간 미리보기로 변경사항 확인 가능

### 3. 빠른 프리셋 설정
- 해상도별 권장 설정을 원클릭으로 적용
- 자동 감지 모드와 수동 설정 모드 선택 가능

## 사용 방법

### UI 스케일링 설정 열기

1. **상태바 버튼 사용**
   - 화면 하단 상태바에서 "⚙️ UI 크기" 버튼 클릭

2. **설정 다이얼로그 사용**
   - 현재 해상도, DPI 정보 확인
   - 자동 스케일링 또는 수동 설정 선택
   - 실시간 미리보기로 효과 확인

### 권장 설정

| 해상도 | 권장 스케일 | 용도 |
|--------|-------------|------|
| 1280x720 (HD) | 60% | 소형 모니터, 저해상도 |
| 1920x1080 (FHD) | 80% | 일반 모니터 |
| 2560x1440 (QHD) | 100% | 고해상도 모니터 (기준) |
| 3840x2160 (4K) | 150% | 4K 모니터 |

## 기술적 세부사항

### 구현된 컴포넌트

1. **ScalingManager** (`ui/scaling_manager.py`)
   - DPI 감지 및 스케일 팩터 계산
   - 설정 저장/로드 기능
   - 해상도별 권장 스케일 관리

2. **동적 테마 시스템** (`ui/theme.py`)
   - `generate_dark_styles()`: 현재 스케일에 맞는 동적 스타일 생성
   - `get_dynamic_styles()`: 스케일링 적용된 스타일시트 반환
   - 기존 정적 스타일과 호환성 유지

3. **스케일링 설정 UI** (`ui/scaling_settings_dialog.py`)
   - 직관적인 설정 인터페이스
   - 실시간 미리보기 기능
   - 빠른 프리셋 설정

4. **메인 애플리케이션 통합**
   - 동적 스타일 적용 (`apply_dynamic_styles()`)
   - 스케일링 변경 시 실시간 업데이트 (`on_scaling_changed()`)
   - 모든 UI 요소 새로고침 (`refresh_all_ui_elements()`)

### 설정 파일

- 위치: `save/ui_scaling_settings.json`
- 형식:
  ```json
  {
    "auto_scaling_enabled": true,
    "user_scale_factor": 1.0
  }
  ```

### 스케일링 계산 로직

1. **DPI 기반 계산**: `physical_dpi / base_dpi (96)`
2. **해상도 기반 조정**: 픽셀 수에 따른 추가 보정
3. **최종 스케일**: `min(dpi_scale, resolution_scale) * user_scale_factor`
4. **범위 제한**: 0.5x ~ 2.0x

## 문제 해결

### 일반적인 문제

1. **UI가 너무 작게 표시되는 경우**
   - UI 크기 설정에서 스케일 값을 높여보세요 (120% ~ 150%)
   - 자동 스케일링이 꺼져있다면 켜보세요

2. **UI가 너무 크게 표시되는 경우**
   - 스케일 값을 낮춰보세요 (60% ~ 80%)
   - FHD 프리셋을 사용해보세요

3. **스케일링이 적용되지 않는 경우**
   - 애플리케이션을 재시작해보세요
   - 설정 파일(`save/ui_scaling_settings.json`)을 삭제하고 재시작하세요

4. **일부 요소만 크기가 변경되지 않는 경우**
   - 해당 요소는 아직 동적 스케일링을 지원하지 않을 수 있습니다
   - GitHub Issues에 버그 리포트를 작성해주세요

### 개발자를 위한 참고사항

새로운 UI 컴포넌트 개발 시 다음 함수들을 사용하여 동적 스케일링을 지원하세요:

```python
from ui.scaling_manager import get_scaled_font_size, get_scaled_size

# 폰트 크기 스케일링
font_size = get_scaled_font_size(16)  # 기본 16px

# 일반 크기 스케일링  
padding = get_scaled_size(8)  # 기본 8px

# 스타일시트 적용
widget.setStyleSheet(f"""
    QWidget {{
        font-size: {font_size}px;
        padding: {padding}px;
    }}
""")
```

## 버전 히스토리

### v2.0.0-dev
- 초기 UI 스케일링 시스템 구현
- DPI 기반 자동 스케일링 지원
- 수동 스케일링 조정 기능
- 설정 UI 및 실시간 미리보기 추가
- 기존 UI 요소 동적 스케일링 적용

## 향후 계획

- [ ] 모든 UI 컴포넌트의 동적 스케일링 완전 지원
- [ ] 테마별 스케일링 설정 지원  
- [ ] 모니터별 개별 스케일링 설정
- [ ] 추가적인 접근성 옵션 (고대비, 큰 글꼴 등)